#errorCatcher Echo
## Copyright 2009-2021 Tom Keffer
## Distributed under terms of GPLv3.  See LICENSE.txt for your rights.
##
## This template tests tags used for generating series
##
##
## Specifying an encoding of UTF-8 is usually safe:
#encoding UTF-8
##
<!DOCTYPE HTML>
<html lang="en">
  <head>
    ## This choice should match the #encoding directive above
    <meta charset="UTF-8">
    <title>Current Weather Conditions</title>
    <link rel="stylesheet" type="text/css" href="weewx.css"/>
    <style>
        p { font-weight: bold; }
    </style>
  </head>

  <body>

    #set ($start, $stop, $data) = $month.outTemp.series(aggregation_type='max', aggregation_interval=86400)
    <p> For what follows, \$start, \$stop, and \$data are defined as:</p>
	<pre>\#set (\$start, \$stop, \$data) = \$month.outTemp.series(aggregation_type='max', aggregation_interval=86400)</pre>

	<hr/>
	<p>\$data:</p>
	<pre> $data </pre>

	<hr/>
	<p>\$data.format("%.2f"): </p>
	<pre>$data.format("%.2f")</pre>

	<hr/>
	<p>\$data.degree_C:</p>
	<pre>$data.degree_C</pre>

	<hr/>
	<p>\$data.json: </p>
	<pre>$data.json</pre>

	<hr/>
	<p>\$data.degree_C.json: </p>
	<pre>$data.degree_C.json</pre>

	<hr/>
	<p>\$data.raw:</p>
    <pre>$data.raw</pre>

	<hr/>
	<p>Aggregated series: \$month.outTemp.series(aggregation_type='max', aggregation_interval=86400).json():</p>
    <pre>$month.outTemp.series(aggregation_type='max', aggregation_interval=86400).json()</pre>

	<hr/>
	<p>Using shortcut 'day': \$month.outTemp.series(aggregation_type='max', aggregation_interval='day').json():</p>
    <pre>$month.outTemp.series(aggregation_type='max', aggregation_interval='day').json()</pre>

	<hr/>
	<p>Order by column: \$month.outTemp.series(aggregation_type='max', aggregation_interval=86400).json(order_by="column"):</p>
    <pre>$month.outTemp.series(aggregation_type='max', aggregation_interval=86400).json(order_by="column")</pre>

	<hr/>
	<p>Unaggregated series: \$day.outTemp.series.json():</p>
    <pre>$day.outTemp.series.json()</pre>

	<hr/>
	<p>Unaggregated series, just emit start times: \$day.outTemp.series.json(time_series='start'):</p>
    <pre>$day.outTemp.series.json(time_series='start')</pre>

    <hr/>
    <p>Unaggregated series, as a formatted string (<em>not JSON</em>) : \$day.outTemp.series:</p>
    <pre>$day.outTemp.series</pre>

    <hr/>
    <p>Unaggregated series, by column, as a formatted string (<em>not JSON</em>) \$day.outTemp.series.format(order_by='column'):</p>
    <pre>$day.outTemp.series.format(order_by='column')</pre>

    <hr/>
    <h2>Complex conversions</h2>

    <p>Starting series: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').json()
    </pre>

    <p> X-component: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').x.json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').x.json()
    </pre>

    <p> x-component, in knots: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').x.knot.json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').x.knot.json()
    </pre>

    <p>Y-component: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').y.json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').y.json()
    </pre>

    <p>magnitude: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').magnitude.json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').magnitude.json()
    </pre>

    <p>direction: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').direction.json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').direction.json()
    </pre>

    <p>polar: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').polar.json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').polar.json()
    </pre>

    <p>polar in knots: \$month.windvec.series(aggregation_type='max', aggregation_interval='day').polar.knot.json()</p>
    <pre>
    $month.windvec.series(aggregation_type='max', aggregation_interval='day').polar.knot.json()
    </pre>


  </body>

</html>
